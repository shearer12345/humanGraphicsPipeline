<!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML>
   <HEAD>
	  <link rel="stylesheet" type="text/css" href="style.css">
      <TITLE>
         Human Graphics Pipeline - Half-space and Barrycentric calculator
      </TITLE>
      

<script language="Javascript">

var a;
var b;
var c;
var p;

function doSubmit(form) {
	a = new vec2(form.ax.value, form.ay.value);
	b = new vec2(form.bx.value, form.by.value);
	c = new vec2(form.cx.value, form.cy.value);
	p = new vec2(form.px.value, form.py.value);

	for(var i=0; i<form.calcType.length; i++){
		if(form.calcType[i].checked)
		{
			if(form.calcType[i].value == "halfspace")
				 doHalfSpace();
			else if(form.calcType[i].value == "barycentric")
				doBarycentric();
		}
	}	
}

function vec2(x,y){
	this.x = x;
	this.y = y;
}

function crossProduct(a, b){
	return (a.x*b.y)-(a.y*b.x);
}

function orient2d(a, b, p){
	return (b.x - a.x) * (p.y - a.y) - (b.y - a.y) * (p.x - a.x);
}
	
function appendText(textIn)
{
    var txtArea = document.getElementById("outVals");
	var txt = document.createTextNode(textIn);
	txtArea.appendChild(txt);
}

function doHalfSpace(){
	appendText("Half-space:" + "\n");
	var v0 = orient2d(b, c, p);
	var v1 = orient2d(c, a, p);
	var v2 = orient2d(a, b, p);
	
	appendText(v0 + "\n");
	appendText(v1 + "\n");
	appendText(v2 + "\n");
	
	var textToAppend = "help";
	if (v0 >= 0 && v1 >= 0 && v2 >= 0)
		textToAppend = "Point p is within triangle";
	else
		textToAppend = "Point p is not within triangle";
		
	appendText(textToAppend + "\n" + "\n");
	return;
}

function doBarycentric() {
	appendText("Barycentric:" + "\n");
	var vs1 = new vec2(b.x-a.x, b.y-a.y);
	var vs2 = new vec2(c.x-a.x, c.y-a.y);
	
	var q = new vec2(p.x-a.x, p.y-a.y);
	var s = crossProduct(q, vs2) / crossProduct(vs1, vs2);
	var t = crossProduct(vs1, q) / crossProduct(vs1, vs2);
	appendText(q.x + ", " + q.y + "\n"); 
	appendText(s + "\n");
	appendText(t + "\n");
	var textToAppend = "Testing";
	
	if (s >= 0 && t >= 0 && s+t <= 1)
		textToAppend = "Point p is within triangle";
	else
		textToAppend = "Point p is not within triangle";
		
	appendText(textToAppend + "\n\n");
	return;
}
</script>
   </HEAD>
<BODY>
<div class="fullcont">
<div class="centercont">
<h1>Half-space and Barycentric calculator</h1>
<form method="post" action="" name="inVals" id="inVals" class="inVals">
<t1>ax: <input type="text" name="ax" id="ax" value="-0.5"> 
ay: <input type="text" name="ay" id="ay" value="-0.5"><br><br>
bx: <input type="text" name="bx" id="bx" value="0.5"> 
by: <input type="text" name="by" id="by" value="-0.5"><br><br>
cx: <input type="text" name="cx" id="cx" value="0.0"> 
cy: <input type="text" name="cy" id="cy" value="0.5"><br><br>
px: <input type="text" name="px" id="px" value="0.0"> 
py: <input type="text" name="py" id="py" value="0.0"><br><br>

<div class="text"><input type="radio" name="calcType" id="calcType" value="halfspace" checked="true">Half-space<br>
<input type="radio" name="calcType" id="calcType" value="barycentric">Barycentric<br><br>
<input type="button" name="calculate" value="Calculate" onclick="doSubmit(this.form)"></div>
</form>
<br><br>
<div class="text"><textarea rows="30" cols = "36" id="outVals">
</textarea></div>
</br>
<a href="index.html">Home</a>

</div></div></t1>
</BODY>
</HTML>
